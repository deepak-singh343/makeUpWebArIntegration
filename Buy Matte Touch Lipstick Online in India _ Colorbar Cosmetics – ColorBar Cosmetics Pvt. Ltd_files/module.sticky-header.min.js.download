(function(l){class p extends HTMLElement{constructor(){super();this.stickyClass="header__content--sticky";this.stickyHeaderClass="header--sticky";this.params={bp:1024};this.currentScroll=0;this.fixedScrollOffset=100;this.init();!this.hideWhenScrollDown&&theme.current.is_desktop&&theme.StickySidebar&&theme.StickySidebar.update&&this.currentSticky&&this.currentSticky.querySelectorAll(".header__content--sticky").length&&theme.StickySidebar.update()}init(){const a=this.dataset.stickyType,b=this.dataset.desktopStickySidebar;
this.header=this.closest("header");this.hideWhenScrollDown="true"===this.dataset.hideWhenScrollDown?!0:!1;if("desktop_and_mobile"===a||"desktop"===a)this.params.desktop={sticky:"[data-js-desktop-sticky]",limit:"bottom",fade:!0,duration:function(){return 1E3*theme.animations.sticky_header.duration}},"true"===b&&(this.params.desktop.move=[{selector:'[data-js-sticky-replace-element="logo"]',appendToSelector:'[data-js-sticky-replace-here="logo"]'},{selector:'[data-js-sticky-replace-element="cart"]',appendToSelector:'[data-js-sticky-replace-here="cart"]'},
{selector:'[data-js-sticky-replace-element="wishlist"]',appendToSelector:'[data-js-sticky-replace-here="wishlist"]'},{selector:'[data-js-sticky-replace-element="compare"]',appendToSelector:'[data-js-sticky-replace-here="compare"]'}]);if("desktop_and_mobile"===a||"mobile"===a)this.params.mobile={sticky:"[data-js-mobile-sticky]",limit:"bottom",fade:!1};this.params.mobile&&(this.stickyMobile=this.querySelector(this.params.mobile.sticky),this.spacerMobile=document.createElement("div"),this.spacerMobile.classList.add("header__spacer"),
this.spacerMobile.classList.add("header__spacer--m"),this.stickyMobile.parentNode.insertBefore(this.spacerMobile,this.stickyMobile));this.params.desktop&&(this.stickyDesktop=this.querySelector(this.params.desktop.sticky),this.spacerDesktop=document.createElement("div"),this.spacerDesktop.classList.add("header__spacer"),this.spacerDesktop.classList.add("header__spacer--d"),this.stickyDesktop.parentNode.insertBefore(this.spacerDesktop,this.stickyDesktop));const c=()=>{this.fix(this.currentSticky,this.currentSpacer);
this.move(this.params[this.bp].move);window.dispatchEvent(new Event("verticalmenu.checkheight"))},g=()=>{this.unfix(this.currentSticky,this.currentSpacer);this.return(this.params[this.bp].move);window.dispatchEvent(new Event("verticalmenu.checkheight"))},m=()=>{const e=theme.current.is_desktop;this.bp=e?"desktop":"mobile";this.currentSticky=e?this.stickyDesktop:this.stickyMobile;this.currentSpacer=e?this.spacerDesktop:this.spacerMobile;this.currentSticky&&(e?(this.spacerDesktop&&this.spacerDesktop.classList.add("header__spacer--visible"),
this.spacerMobile&&(this.spacerMobile.classList.remove("header__spacer--visible"),this.stickyMobile.classList.contains(this.stickyClass)&&(this.unfix(this.stickyMobile,this.spacerMobile),this.return(this.params.mobile.move)))):(this.spacerMobile&&this.spacerMobile.classList.add("header__spacer--visible"),this.spacerDesktop&&(this.spacerDesktop.classList.remove("header__spacer--visible"),this.stickyDesktop.classList.contains(this.stickyClass)&&(this.unfix(this.stickyDesktop,this.spacerDesktop),this.return(this.params.desktop.move)))))},
k=()=>{if(this.currentSticky){var e=this.currentSticky.getBoundingClientRect(),f=this.currentSpacer.getBoundingClientRect(),n=this.querySelector(".menu--vertical.menu--fixed"),q=document.querySelector(".vertical-menu-spacer"),h=!1,d=this.params[this.bp].limit?this.params[this.bp].limit:0;"bottom"===d&&(d=this.currentSticky.classList.contains(this.stickyClass)?f.height:e.height);d*=-1;f.top<d&&(!this.hideWhenScrollDown||n&&q&&0<n.getBoundingClientRect().bottom||document.querySelectorAll(".sidebar-fixed-top").length)&&
(h=!0);f.top<d&&window.pageYOffset<this.currentScroll&&!this.querySelectorAll(".menu .visible").length||h?(!this.currentSticky.classList.contains(this.stickyClass)&&(h||!this.unfixedScroll||window.pageYOffset<this.unfixedScroll)&&c(),ie||this.checkHeight(this.currentSticky,this.params[this.bp]),document.body.classList.contains("position-fixed")||(this.fixedScroll=window.pageYOffset+this.fixedScrollOffset)):((this.querySelectorAll(".menu .visible").length&&f.top>=d||f.top>=d&&this.currentSticky.classList.contains(this.stickyClass)||
this.currentSticky.classList.contains(this.stickyClass)&&(!this.fixedScroll||window.pageYOffset>this.fixedScroll)&&!this.querySelectorAll(".menu .visible").length)&&g(),this.unfixedScroll=window.pageYOffset-this.fixedScrollOffset);this.currentScroll=window.pageYOffset}};m();k();theme.current.is_desktop&&theme.VerticalMenu&&theme.VerticalMenu.checkHeightVerticalMenu&&setTimeout(function(){window.dispatchEvent(new Event("verticalmenu.checkheight"))},50);window.addEventListener("theme.resize",()=>{m();
k()});window.addEventListener("scroll",()=>{document.body.classList.contains("position-fixed")||k()})}fix(a,b){b.style.height=`${a.getBoundingClientRect().height}px`;this.params[this.bp].fade&&(a.style.opacity=0,l(a).animate({opacity:theme.animations.sticky_header.opacity},this.params[this.bp].duration()));a.classList.add(this.stickyClass);this.header.classList.add(this.stickyHeaderClass)}unfix(a,b){b.removeAttribute("style");this.params[this.bp].fade&&l(a).stop();a.removeAttribute("style");a.classList.remove(this.stickyClass);
this.header.classList.remove(this.stickyHeaderClass)}move(a){if(a)for(let b=0;b<a.length;b++){const c=this.querySelector(a[b].selector),g=this.querySelector(a[b].appendToSelector);c&&g&&(a[b].element=c,a[b].parent=c.parentNode,g.appendChild(a[b].element))}}return(a){if(a)for(let b=0;b<a.length;b++)a[b].element&&(a[b].parent.appendChild(a[b].element),a[b].element=null,a[b].parent=null)}checkHeight(a,b){if(b.height){var c=this.currentSpacer.getBoundingClientRect();a.style.minHeight=`${c.bottom<=b.height?
b.height:c.bottom}px`}}getStickyHeight(){return this.currentSticky&&this.params[this.bp]?this.params[this.bp].height?this.params[this.bp].height:this.currentSticky.getBoundingClientRect().height:0}}theme.AssetsLoader.onPageLoaded(function(){customElements.define("sticky-header",p)})})(jQueryTheme);
