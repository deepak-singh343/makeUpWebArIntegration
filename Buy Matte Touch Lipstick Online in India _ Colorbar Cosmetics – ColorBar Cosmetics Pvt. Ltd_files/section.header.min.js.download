(function(f){theme.MenuBuilder=function(k,p){function q(a,d){this.settings={popup_name:"navigation",button_navigation:"data-js-popup-navigation-button"};this.selectors={popup_navigation:".js-popup-navigation"};this.params={};this.init(a,d)}q.prototype=f.extend({},q.prototype,{is_vertical:!1,is_open_animate:!1,mobile_level:0,duration:function(){return.1<window.theme.animations.menu.duration?1E3*(window.theme.animations.menu.duration-.1):0},init:function(a,d){function l(c){a[c.height()>a.height()?"addClass":
"removeClass"]("menu--scroll-visible");a.unbind("scroll");a.one("scroll",function(){a.removeClass("menu--scroll-visible")})}function e(c){var h=g.parents("[data-popup-content]");g.css({"min-height":""});c=c.innerHeight();g.css({"min-height":Math.ceil(c)});h.css({overflow:"hidden"});setTimeout(function(){h.removeAttr("style")},100)}var b=this,g=a.find(".menu__panel"),r=g.find(".menu__megamenu"),D=g.find(".menu__dropdown"),B=f(this.selectors.popup_navigation),u=B.find("["+this.settings.button_navigation+
"]"),E=a.find(".menu__curtain");this.$menu=a;this.$panel=g;this.$megamenus=r;this.$dropdowns=D;this.$curtain=E;this.is_vertical=a.hasClass("menu--vertical");this.is_vertical_fixed=a[0].hasAttribute("data-js-menu-vertical-fixed");if(this.is_vertical){var t=f(".js-menu-vertical-btn-toggle"),v=f(".vertical-menu-spacer"),y=g.find("> .menu__item"),w=a.find("[data-js-menu-vertical-see-all]"),z=parseInt(g.css("padding-top"))+parseInt(g.css("padding-bottom"));this.$menu_vertical_btn=t;this.$menu_vertical_spacer=
v;this.$btn_see_all=w;this.$megamenus_width=f("[data-js-megamenu-width]");this.handlerMenu=theme.Global.responsiveHandler({namespace:d.namespace,element:t,on_desktop:!0,events:{click:function(c){c=f(this);c.hasClass("menu-vertical-btn--fixed")||(c.toggleClass("menu-vertical-btn--open"),a[c.hasClass("menu-vertical-btn--open")?"addClass":"removeClass"]("menu--open"))}}});this.handlerMenu=theme.Global.responsiveHandler({namespace:d.namespace,element:$body,delegate:"[data-js-menu-vertical-see-all]",on_desktop:!0,
events:{click:function(c){a.toggleClass("menu--items-visible")}}});this.closeVerticalMenu=function(){t.removeClass("menu-vertical-btn--open");a.removeClass("menu--open")};this.is_vertical_fixed?(this.openVerticalMenu=function(){t.addClass("menu-vertical-btn--open");a.addClass("menu--open")},this.fixVerticalMenu=function(){t.addClass("menu-vertical-btn--fixed");a.addClass("menu--fixed")},this.unfixVerticalMenu=function(){t.removeClass("menu-vertical-btn--fixed");a.removeClass("menu--fixed")},v.length?
(this.checkHeightVerticalMenu=function(){var c=v[0].getBoundingClientRect().bottom-a[0].getBoundingClientRect().top,h=w.innerHeight(),m=0,n=0,x=!1;g.innerHeight(Math.max(c,h+z));var C=c-z;y.each(function(){m+=f(this).innerHeight()});y.each(function(){var A=f(this);n+=A.innerHeight();m<C||n<C-h?A.attr("data-js-menu-vertical-item",null):(A.attr("data-js-menu-vertical-item","hidden"),x=!0)});w[x?"addClass":"removeClass"]("menu__see-all--visible")},this.handlerMenu=theme.Global.responsiveHandler({namespace:d.namespace,
element:$window,on_desktop:!0,onbindtrigger:"verticalmenu.checkheight",events:{"load.verticalmenu scroll.verticalmenu theme.resize.verticalmenu verticalmenu.checkheight":function(c){a.removeClass("menu--items-visible");t[0].getBoundingClientRect().bottom+z+y.first().innerHeight()+w.innerHeight()>v[0].getBoundingClientRect().bottom?(g.css({height:""}),b.closeVerticalMenu(),b.unfixVerticalMenu()):(b.openVerticalMenu(),b.fixVerticalMenu(),b.checkHeightVerticalMenu())}}})):this.handlerMenu=theme.Global.responsiveHandler({namespace:d.namespace,
element:$window,on_desktop:!0,events:{"load.verticalmenu scroll.verticalmenu theme.resize.verticalmenu verticalmenu.checkheight":function(c){a.removeClass("menu--items-visible");a.parents(".header__content--sticky").length?(b.closeVerticalMenu(),b.unfixVerticalMenu()):(b.openVerticalMenu(),b.fixVerticalMenu())}}})):this.handlerMenu=theme.Global.responsiveHandler({namespace:d.namespace,element:$window,on_desktop:!0,events:{"load.verticalmenu scroll.verticalmenu theme.resize.verticalmenu verticalmenu.checkheight":function(c){a.removeClass("menu--items-visible");
b.closeVerticalMenu()}}})}g.find("[data-js-menu-preview-image]").length&&(this.handlerMenu=theme.Global.responsiveHandler({namespace:d.namespace,element:g,delegate:".menu__item > a",on_desktop:!0,events:{mouseenter:function(){var c=f(this),h=c.find("[data-js-menu-preview-image]");if(h.length){h=h.children().first();var m=f(".header__content--sticky");m.length||(m=f(".header"));var n=$window.innerHeight()-h[0].getBoundingClientRect().bottom;0>n&&(n*=-1,m.length&&(n=Math.min(n+20,c[0].getBoundingClientRect().bottom-
m[0].getBoundingClientRect().bottom-20)),h.css({"margin-top":-1*n}))}},mouseleave:function(){var c=f(this).find("[data-js-menu-preview-image]");if(c.length){var h=c.children().first();c.one("transitionend",function(){h.removeAttr("style")});"0s"===c.css("transition-duration")&&c.trigger("transitionend")}}}}));this.handlerMenu=theme.Global.responsiveHandler({namespace:d.namespace,element:a,delegate:"a",on_mobile:!0,events:{click:function(c){var h=f(this).parent(),m=h.find(".menu__list").first();g.unbind("transitionend");
if(m.length){var n=h.parents(".menu__level-03").length?4:h.parents(".menu__level-02").length?3:2;a.scrollTop(0);h.addClass("open");m.addClass("show");g.attr("data-mobile-level",n);e(m);l(m);u.attr(b.settings.button_navigation,"back");b.mobile_level=n;c.preventDefault();return!1}}}});this.handlerBack=theme.Global.responsiveHandler({namespace:d.namespace,element:B,delegate:"["+this.settings.button_navigation+'="back"]',on_mobile:!0,events:{click:function(){var c=g.attr("data-mobile-level")-1,h=1<c?
"back":"close",m=a.find(".menu__item.open").last(),n=m.find(".menu__list").first();a.scrollTop(0);b.mobile_level=c;b.is_vertical&&theme.Menu?1<theme.Menu.mobile_level&&(h="back"):!b.is_vertical&&theme.VerticalMenu&&1<theme.VerticalMenu.mobile_level&&(h="back");m.removeClass("open");g.one("transitionend",function(){n.removeClass("show")});g.attr("data-mobile-level",c);e(m.parents(".menu__list").first());l(n.parents(".menu__list").first());u.attr(b.settings.button_navigation,h);"0s"===g.css("transition-duration")&&
g.trigger("transitionend")}}});theme.Popups.addHandler(this.settings.popup_name,"close.before.closeMobileMenu",function(){theme.current.is_mobile&&(b.closeMobileMenu(),u.attr(b.settings.button_navigation,"close"))});this.handlerDropdown=theme.Global.responsiveHandler({namespace:d.namespace,element:g,delegate:"> .menu__item",on_desktop:!0,events:{"mouseenter mouseleave":function(c){theme.SearchAjax&&theme.SearchAjax.closeAll();b._toggleMegamenu(f(this),c)}}});this.handlerDropdown=theme.Global.responsiveHandler({namespace:d.namespace,
element:g,delegate:"> .menu__item > a",on_desktop:!0,events:{touchstart:function(c){$body.unbind("touchstart.menu-item");var h=f(this).parent(),m=h.find(".menu__megamenu, .menu__dropdown");if(m.length)return m.hasClass("show")?location.href=h.find("> a").attr("href"):(h.trigger("mouseenter"),$body.one("touchstart.menu-item",function(x){f.contains(m[0],x.target)||h.trigger("mouseleave")})),c.preventDefault,!1;var n=g.find(".menu__megamenu, .menu__dropdown").filter(".show");if(n.length)return n.first().parents(".menu__item").find("> a").trigger("mouseleave"),
setTimeout(function(){location.href=h.find("> a").attr("href")},.1<window.theme.animations.menu.duration?1E3*(window.theme.animations.menu.duration-.1):0),c.preventDefault,!1}}});$window.on("theme.changed.breakpoint"+d.namespace,function(){theme.current.is_desktop&&(b.closeMobileMenu(!0),u.attr(b.settings.button_navigation,"close"))});a.addClass("menu--loaded");return{destroy:function(){theme.Popups.removeHandler(b.settings.popup_name,"close.before.closeMobileMenu");b.handlerMenu.unbind();b.handlerBack.unbind();
b.handlerDropdown.unbind()}}},_toggleMegamenu:function(a,d){var l=this,e=a.find(".menu__megamenu"),b=a.find(".menu__dropdown"),g=a.find(".menu__holder");"mouseenter"===d.type?e.length?(this.is_open_animate=!0,g.removeClass("d-none").css({height:this.$panel[0].getBoundingClientRect().bottom-a[0].getBoundingClientRect().bottom+"px"}),e.stop(),this.$dropdowns.finish(),this.is_vertical&&(a=(a=e.attr("data-js-width-limit"))?+a:Infinity,e.add(this.$curtain).css({width:Math.ceil(Math.min(a,this.$megamenus_width.innerWidth()))+
1}),this.$megamenus.filter(".show").length||this.$curtain.add(e).css({height:Math.ceil(k.innerHeight())})),this.$megamenus.not(e).removeClass("show animate visible").removeAttr("style"),this.$dropdowns.removeClass("show animate visible").removeAttr("style"),e.addClass("show overflow-hidden"),e[0].getBoundingClientRect(),a=e.children().innerHeight(),this.is_vertical&&(a=Math.max(k.innerHeight(),a)),this.$curtain.animate({height:a},{duration:this.duration(),start:function(){l.$curtain.addClass("show");
e.addClass("animate visible")},step:function(r){e.height(r)},complete:function(){e.removeClass("overflow-hidden").css({"max-height":""});l.is_open_animate=!1}})):b.length&&!f(d.target).parents(".menu__dropdown").length&&(b.addClass("show"),b.stop(),this.$megamenus.finish(),this.$dropdowns.not(b).removeClass("show animate visible").removeAttr("style"),this.$megamenus.removeClass("show animate visible").removeAttr("style"),b.hide().slideDown({duration:this.duration(),start:function(){setTimeout(function(){b.addClass("animate visible")},
0)},complete:function(){b.removeAttr("style")}})):"mouseleave"===d.type&&(e.length&&e.hasClass("show")?(this.$curtain.stop(),g.addClass("d-none").removeAttr("style"),e.height(l.$curtain.height()).animate({height:0},{duration:this.duration(),start:function(){e.addClass("overflow-hidden").removeClass("visible")},step:function(r){l.$curtain.height(r)},complete:function(){e.removeClass("show animate overflow-hidden").removeAttr("style");l.is_open_animate||l.$curtain.removeClass("show").removeAttr("style")}})):
b.length&&b.slideUp({duration:this.duration(),start:function(){b.removeClass("visible")},complete:function(){b.removeClass("show animate").removeAttr("style")}}))},closeMobileMenu:function(a){if(theme.current.is_mobile||a){var d=this.$menu.find(".menu__panel");d.find(".menu__item").removeClass("open");d.one("transitionend",function(){d.find(".menu__list").removeClass("show")});d.attr("data-mobile-level","1");"0s"===d.css("transition-duration")&&d.trigger("transitionend");this.$menu.scrollTop(0);this.mobile_level=
0}}});return new q(k,p)};class F extends HTMLElement{constructor(){super();this.load()}load(){this.$container=f(this);this.namespace=".header";theme.isLoaded&&(theme.Position.update("menu"),theme.Position.update("currency"));theme.StoreLists.updateHeaderCount();this.widthLimitInit(this.$container,this.namespace);this.menuInit(this.namespace);this.tapeInit();this.currencyInit();this.languagesInit()}currencyInit(){this.$currencies_form=f(".js-currencies-form");this.$currencies_form.find("select").on("change",
function(){f(this).parents("form").submit()})}currencyDestroy(){this.$currencies_form&&this.$currencies_form.off()}tapeInit(){var k=this.$container.find(".js-header-tape");if(k.length){var p=k.find('[data-js-action="close"]'),q=theme.Cookie.get("header-tape"),a=k.attr("data-js-show-once"),d=+k.attr("data-js-delay"),l=+k.attr("data-js-cookies-life");"off"!==q&&(k.hasClass("d-none")&&setTimeout(function(){k.hide().removeClass("d-none");k.slideDown({duration:1E3*theme.animations.header_tape.duration,
complete:function(){k.removeAttr("style");$window.trigger("fullscreenimage.update")}})},1E3*d),p.on("click",function(){if("true"===a){var e=new Date,b=864E5*l;e.setTime(e.getTime()+b);theme.Cookie.set("header-tape","off",{expires:e})}f(this).off();k.slideUp({duration:1E3*theme.animations.header_tape.duration,complete:function(){k.remove()}})}));this.tapeButtonClose=p}}menuInit(k){var p=f(".js-menu"),q=f(".js-menuu"),a=f(".js-vertical-menu");p.length&&(this.$menu=p.first(),theme.Menu=new theme.MenuBuilder(this.$menu,
{namespace:k}));q.length&&(this.$menuu=q.first(),theme.Menuu=new theme.MenuBuilder(this.$menuu,{namespace:k}));a.length&&(this.$vertical_menu=a.first(),theme.VerticalMenu=new theme.MenuBuilder(this.$vertical_menu,{namespace:k}))}menuDestroy(){this.api&&(this.$menu.unbind("mouseenter"),this.api.destroy(),this.api=null);this.vertical_api&&(this.$vertical_menu.unbind("mouseenter"),this.vertical_api.destroy(),this.vertical_api=null);this.handler&&this.handler.destroy()}languagesInit(){var k=f(".js-languages-list"),
p=f(".weglot-container").eq(0);if(k.length&&p.length){var q=p.find(".wgcurrent"),a=p.find("ul"),d=k.find(".header__btn-language span"),l=k.find("ul");this.$header_list=l;(function(){var e=q.find("a").html(),b=f("<span>").html(e);b=f("<li>").addClass("active").attr("data-l",q.attr("data-l")).append(b);d.html(e);l.html("").append(b);a.find("li").each(function(){var g=f(this),r=f("<span>").html(g.find("a").html());g=f("<li>").attr("data-l",g.attr("data-l")).append(r);l.append(g)})})();k.removeClass("d-none-important");
l.on("click","li:not(.active)",function(){var e=f(this);a.find('li[data-l="'+e.attr("data-l")+'"] a').trigger("click");var b=q.attr("data-l"),g=q.find("a").html();d.html(g);l.find("li").removeClass("active").filter('[data-l="'+b+'"]').addClass("active");e.parents("[data-js-dropdown]").trigger("hide")})}else p.length&&(p.find("ul").addClass("list-unstyled"),p.addClass("show"))}languagesDestroy(){this.api&&(this.api.destroy(),this.api=null);this.$header_list&&this.$header_list.off()}widthLimitInit(k,
p){var q=k.find("[data-js-header-width-limit]");q.length&&(this.handlerWidthLimit=theme.Global.responsiveHandler({namespace:p,element:$window,on_desktop:!0,onbindtrigger:"header.widthlimit",events:{"load.widthlimit theme.resize.widthlimit header.widthlimit":function(a){theme.current.is_desktop&&q.each(function(){var d=f(this),l=d[0].getBoundingClientRect(),e=d.attr("data-js-header-width-limit"),b=+d.attr("data-js-header-width-limit-margin")||0;e=k.find('[data-js-header-width-limit-edge="'+e+'"]').first()[0].getBoundingClientRect();
theme.rtl?d.css({"max-width":theme.current.width-theme.current.scrollW-(theme.current.width-theme.current.scrollW-l.right)-e.right-b+"px"}):d.css({"max-width":theme.current.width-theme.current.scrollW-l.left-(theme.current.width-theme.current.scrollW-e.left)-b+"px"});d.removeClass("invisible-lg")})}}}))}widthLimitDestroy(){this.handlerWidthLimit&&this.handlerWidthLimit.unbind()}disconnectedCallback(){this.$container.off(this.namespace);this.widthLimitDestroy();this.menuDestroy();this.currencyDestroy();
this.languagesInit();this.tapeButtonClose&&this.tapeButtonClose.off()}}theme.AssetsLoader.onPageLoaded(function(){customElements.define("header-section",F)})})(jQueryTheme);
